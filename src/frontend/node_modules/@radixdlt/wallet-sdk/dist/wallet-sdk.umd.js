(function(d,L){typeof exports=="object"&&typeof module<"u"?L(exports):typeof define=="function"&&define.amd?define(["exports"],L):(d=typeof globalThis<"u"?globalThis:d||self,L(d["wallet-sdk"]={}))})(this,function(d){"use strict";var Xi=Object.defineProperty;var eo=(d,L,M)=>L in d?Xi(d,L,{enumerable:!0,configurable:!0,writable:!0,value:M}):d[L]=M;var $e=(d,L,M)=>(eo(d,typeof L!="symbol"?L+"":L,M),M);var L=function(t,e){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},L(t,e)};function M(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");L(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function yr(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(w){o(w)}}function c(l){try{u(r.throw(l))}catch(w){o(w)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function Ft(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Se(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function fe(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Te(t){return this instanceof Te?(this.v=t,this):new Te(t)}function vr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(y){r[y]&&(s[y]=function(S){return new Promise(function(j,m){i.push([y,S,j,m])>1||a(y,S)})})}function a(y,S){try{c(r[y](S))}catch(j){w(i[0][3],j)}}function c(y){y.value instanceof Te?Promise.resolve(y.value.v).then(u,l):w(i[0][2],y)}function u(y){a("next",y)}function l(y){a("throw",y)}function w(y,S){y(S),i.shift(),i.length&&a(i[0][0],i[0][1])}}function gr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Se=="function"?Se(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function $(t){return typeof t=="function"}function st(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var it=st(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,s){return s+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Fe(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Oe=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,s,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Se(o),c=a.next();!c.done;c=a.next()){var u=c.value;u.remove(this)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if($(l))try{l()}catch(m){i=m instanceof it?m.errors:[m]}var w=this._finalizers;if(w){this._finalizers=null;try{for(var y=Se(w),S=y.next();!S.done;S=y.next()){var j=S.value;try{zt(j)}catch(m){i=i??[],m instanceof it?i=fe(fe([],de(i)),de(m.errors)):i.push(m)}}}catch(m){r={error:m}}finally{try{S&&!S.done&&(s=y.return)&&s.call(y)}finally{if(r)throw r.error}}}if(i)throw new it(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)zt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Fe(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Fe(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),Bt=Oe.EMPTY;function Vt(t){return t instanceof Oe||t&&"closed"in t&&$(t.remove)&&$(t.add)&&$(t.unsubscribe)}function zt(t){$(t)?t():t.unsubscribe()}var ot={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},at={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=at.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,fe([t,e],de(n))):setTimeout.apply(void 0,fe([t,e],de(n)))},clearTimeout:function(t){var e=at.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Ht(t){at.setTimeout(function(){throw t})}function ut(){}var Be=null;function Ve(t){if(ot.useDeprecatedSynchronousErrorHandling){var e=!Be;if(e&&(Be={errorThrown:!1,error:null}),t(),e){var n=Be,r=n.errorThrown,s=n.error;if(Be=null,r)throw s}}else t()}var ct=function(t){M(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Vt(n)&&n.add(r)):r.destination=Sr,r}return e.create=function(n,r,s){return new Ae(n,r,s)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Oe),_r=Function.prototype.bind;function lt(t,e){return _r.call(t,e)}var br=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){ze(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){ze(r)}else ze(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){ze(n)}},t}(),Ae=function(t){M(e,t);function e(n,r,s){var i=t.call(this)||this,o;if($(n)||!n)o={next:n??void 0,error:r??void 0,complete:s??void 0};else{var a;i&&ot.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return i.unsubscribe()},o={next:n.next&&lt(n.next,a),error:n.error&&lt(n.error,a),complete:n.complete&&lt(n.complete,a)}):o=n}return i.destination=new br(o),i}return e}(ct);function ze(t){Ht(t)}function wr(t){throw t}var Sr={closed:!0,next:ut,error:wr,complete:ut},dt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function He(t){return t}function Tr(t){return t.length===0?He:t.length===1?t[0]:function(n){return t.reduce(function(r,s){return s(r)},n)}}var F=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var s=this,i=Ar(e)?e:new Ae(e,n,r);return Ve(function(){var o=s,a=o.operator,c=o.source;i.add(a?a.call(i,c):c?s._subscribe(i):s._trySubscribe(i))}),i},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=Gt(n),new n(function(s,i){var o=new Ae({next:function(a){try{e(a)}catch(c){i(c),o.unsubscribe()}},error:i,complete:s});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[dt]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Tr(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=Gt(e),new e(function(r,s){var i;n.subscribe(function(o){return i=o},function(o){return s(o)},function(){return r(i)})})},t.create=function(e){return new t(e)},t}();function Gt(t){var e;return(e=t??ot.Promise)!==null&&e!==void 0?e:Promise}function Or(t){return t&&$(t.next)&&$(t.error)&&$(t.complete)}function Ar(t){return t&&t instanceof ct||Or(t)&&Vt(t)}function xr(t){return $(t==null?void 0:t.lift)}function B(t){return function(e){if(xr(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function H(t,e,n,r,s){return new Er(t,e,n,r,s)}var Er=function(t){M(e,t);function e(n,r,s,i,o,a){var c=t.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=r?function(u){try{r(u)}catch(l){n.error(l)}}:t.prototype._next,c._error=i?function(u){try{i(u)}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=s?function(){try{s()}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(ct),kr=st(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),re=function(t){M(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new Yt(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new kr},e.prototype.next=function(n){var r=this;Ve(function(){var s,i;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=Se(r.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(n)}}catch(u){s={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}}})},e.prototype.error=function(n){var r=this;Ve(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var s=r.observers;s.length;)s.shift().error(n)}})},e.prototype.complete=function(){var n=this;Ve(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,s=this,i=s.hasError,o=s.isStopped,a=s.observers;return i||o?Bt:(this.currentObservers=null,a.push(n),new Oe(function(){r.currentObservers=null,Fe(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,s=r.hasError,i=r.thrownError,o=r.isStopped;s?n.error(i):o&&n.complete()},e.prototype.asObservable=function(){var n=new F;return n.source=this,n},e.create=function(n,r){return new Yt(n,r)},e}(F),Yt=function(t){M(e,t);function e(n,r){var s=t.call(this)||this;return s.destination=n,s.source=r,s}return e.prototype.next=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.next)===null||s===void 0||s.call(r,n)},e.prototype.error=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.error)===null||s===void 0||s.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,s;return(s=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&s!==void 0?s:Bt},e}(re),Kt={now:function(){return(Kt.delegate||Date).now()},delegate:void 0},Ir=function(t){M(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(Oe),Ge={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=Ge.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,fe([t,e],de(n))):setInterval.apply(void 0,fe([t,e],de(n)))},clearInterval:function(t){var e=Ge.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},Rr=function(t){M(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.scheduler=n,s.work=r,s.pending=!1,s}return e.prototype.schedule=function(n,r){var s;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,r)),this.pending=!0,this.delay=r,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(n,r,s){return s===void 0&&(s=0),Ge.setInterval(n.flush.bind(n,this),s)},e.prototype.recycleAsyncId=function(n,r,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return r;r!=null&&Ge.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(n,r);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var s=!1,i;try{this.work(n)}catch(o){s=!0,i=o||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),i},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,s=n.scheduler,i=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Fe(i,this),r!=null&&(this.id=this.recycleAsyncId(s,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Ir),Jt=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=Kt.now,t}(),Pr=function(t){M(e,t);function e(n,r){r===void 0&&(r=Jt.now);var s=t.call(this,n,r)||this;return s.actions=[],s._active=!1,s}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var s;this._active=!0;do if(s=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,s){for(;n=r.shift();)n.unsubscribe();throw s}},e}(Jt),Nr=new Pr(Rr),Cr=Nr,Qt=new F(function(t){return t.complete()});function Xt(t){return t&&$(t.schedule)}function en(t){return t[t.length-1]}function tn(t){return Xt(en(t))?t.pop():void 0}function $r(t,e){return typeof en(t)=="number"?t.pop():e}var nn=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function rn(t){return $(t==null?void 0:t.then)}function sn(t){return $(t[dt])}function on(t){return Symbol.asyncIterator&&$(t==null?void 0:t[Symbol.asyncIterator])}function an(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function jr(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var un=jr();function cn(t){return $(t==null?void 0:t[un])}function ln(t){return vr(this,arguments,function(){var n,r,s,i;return Ft(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Te(n.read())];case 3:return r=o.sent(),s=r.value,i=r.done,i?[4,Te(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Te(s)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function dn(t){return $(t==null?void 0:t.getReader)}function se(t){if(t instanceof F)return t;if(t!=null){if(sn(t))return Lr(t);if(nn(t))return Mr(t);if(rn(t))return Dr(t);if(on(t))return fn(t);if(cn(t))return Wr(t);if(dn(t))return Ur(t)}throw an(t)}function Lr(t){return new F(function(e){var n=t[dt]();if($(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Mr(t){return new F(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Dr(t){return new F(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,Ht)})}function Wr(t){return new F(function(e){var n,r;try{for(var s=Se(t),i=s.next();!i.done;i=s.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e.complete()})}function fn(t){return new F(function(e){Zr(t,e).catch(function(n){return e.error(n)})})}function Ur(t){return fn(ln(t))}function Zr(t,e){var n,r,s,i;return yr(this,void 0,void 0,function(){var o,a;return Ft(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=gr(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),s={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function ie(t,e,n,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function hn(t,e){return e===void 0&&(e=0),B(function(n,r){n.subscribe(H(r,function(s){return ie(r,t,function(){return r.next(s)},e)},function(){return ie(r,t,function(){return r.complete()},e)},function(s){return ie(r,t,function(){return r.error(s)},e)}))})}function pn(t,e){return e===void 0&&(e=0),B(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function qr(t,e){return se(t).pipe(pn(e),hn(e))}function Fr(t,e){return se(t).pipe(pn(e),hn(e))}function Br(t,e){return new F(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Vr(t,e){return new F(function(n){var r;return ie(n,e,function(){r=t[un](),ie(n,e,function(){var s,i,o;try{s=r.next(),i=s.value,o=s.done}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),function(){return $(r==null?void 0:r.return)&&r.return()}})}function mn(t,e){if(!t)throw new Error("Iterable cannot be null");return new F(function(n){ie(n,e,function(){var r=t[Symbol.asyncIterator]();ie(n,e,function(){r.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function zr(t,e){return mn(ln(t),e)}function Hr(t,e){if(t!=null){if(sn(t))return qr(t,e);if(nn(t))return Br(t,e);if(rn(t))return Fr(t,e);if(on(t))return mn(t,e);if(cn(t))return Vr(t,e);if(dn(t))return zr(t,e)}throw an(t)}function yn(t,e){return e?Hr(t,e):se(t)}function Gr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=tn(t);return yn(t,n)}var ft=st(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function Yr(t,e){var n=typeof e=="object";return new Promise(function(r,s){var i=new Ae({next:function(o){r(o),i.unsubscribe()},error:s,complete:function(){n?r(e.defaultValue):s(new ft)}});t.subscribe(i)})}function Kr(t){return t instanceof Date&&!isNaN(t)}function je(t,e){return B(function(n,r){var s=0;n.subscribe(H(r,function(i){r.next(t.call(e,i,s++))}))})}function Jr(t,e,n,r,s,i,o,a){var c=[],u=0,l=0,w=!1,y=function(){w&&!c.length&&!u&&e.complete()},S=function(m){return u<r?j(m):c.push(m)},j=function(m){i&&e.next(m),u++;var I=!1;se(n(m,l++)).subscribe(H(e,function(R){s==null||s(R),i?S(R):e.next(R)},function(){I=!0},void 0,function(){if(I)try{u--;for(var R=function(){var A=c.shift();o?ie(e,o,function(){return j(A)}):j(A)};c.length&&u<r;)R();y()}catch(A){e.error(A)}}))};return t.subscribe(H(e,S,function(){w=!0,y()})),function(){a==null||a()}}function vn(t,e,n){return n===void 0&&(n=1/0),$(e)?vn(function(r,s){return je(function(i,o){return e(r,i,s,o)})(se(t(r,s)))},n):(typeof e=="number"&&(n=e),B(function(r,s){return Jr(r,s,t,n)}))}function Qr(t){return t===void 0&&(t=1/0),vn(He,t)}function Xr(t,e,n){t===void 0&&(t=0),n===void 0&&(n=Cr);var r=-1;return e!=null&&(Xt(e)?n=e:r=e),new F(function(s){var i=Kr(t)?+t-n.now():t;i<0&&(i=0);var o=0;return n.schedule(function(){s.closed||(s.next(o++),0<=r?this.schedule(void 0,r):s.complete())},i)})}function ht(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=tn(t),r=$r(t,1/0),s=t;return s.length?s.length===1?se(s[0]):Qr(r)(yn(s,n)):Qt}function Le(t,e){return B(function(n,r){var s=0;n.subscribe(H(r,function(i){return t.call(e,i,s++)&&r.next(i)}))})}function es(t){return B(function(e,n){var r=!1;e.subscribe(H(n,function(s){r=!0,n.next(s)},function(){r||n.next(t),n.complete()}))})}function ts(t){return t<=0?function(){return Qt}:B(function(e,n){var r=0;e.subscribe(H(n,function(s){++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function ns(t){return t===void 0&&(t=rs),B(function(e,n){var r=!1;e.subscribe(H(n,function(s){r=!0,n.next(s)},function(){return r?n.complete():n.error(t())}))})}function rs(){return new ft}function gn(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Le(function(s,i){return t(s,i,r)}):He,ts(1),n?es(e):ns(function(){return new ft}))}}function _n(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new re}:e,r=t.resetOnError,s=r===void 0?!0:r,i=t.resetOnComplete,o=i===void 0?!0:i,a=t.resetOnRefCountZero,c=a===void 0?!0:a;return function(u){var l,w,y,S=0,j=!1,m=!1,I=function(){w==null||w.unsubscribe(),w=void 0},R=function(){I(),l=y=void 0,j=m=!1},A=function(){var le=l;R(),le==null||le.unsubscribe()};return B(function(le,q){S++,!m&&!j&&I();var Ce=y=y??n();q.add(function(){S--,S===0&&!m&&!j&&(w=pt(A,c))}),Ce.subscribe(q),!l&&S>0&&(l=new Ae({next:function(be){return Ce.next(be)},error:function(be){m=!0,I(),w=pt(R,s,be),Ce.error(be)},complete:function(){j=!0,I(),w=pt(R,o),Ce.complete()}}),se(le).subscribe(l))})(u)}}function pt(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e===!0){t();return}if(e!==!1){var s=new Ae({next:function(){s.unsubscribe(),t()}});return e.apply(void 0,fe([],de(n))).subscribe(s)}}function ss(t){return B(function(e,n){se(t).subscribe(H(n,function(){return n.complete()},ut)),!n.closed&&e.subscribe(n)})}function xe(t,e,n){var r=$(t)||e||n?{next:t,error:e,complete:n}:t;return r?B(function(s,i){var o;(o=r.subscribe)===null||o===void 0||o.call(r);var a=!0;s.subscribe(H(i,function(c){var u;(u=r.next)===null||u===void 0||u.call(r,c),i.next(c)},function(){var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},function(c){var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),i.error(c)},function(){var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):He}const is=()=>({outgoingMessageSubject:new re,incomingMessageSubject:new re,responseSubject:new re,messageLifeCycleEventSubject:new re,dispatchEventSubject:new re}),mt={outgoingMessage:"radix#chromeExtension#send",incomingMessage:"radix#chromeExtension#receive"},os=t=>t.outgoingMessageSubject.pipe(je(e=>({event:mt.outgoingMessage,payload:e})),xe(e=>{t.dispatchEventSubject.next(e)}),_n());var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bn={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(Me,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"];function i(m,I){var R=m[I];if(typeof R.bind=="function")return R.bind(m);try{return Function.prototype.bind.call(R,m)}catch{return function(){return Function.prototype.apply.apply(R,[m,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?o:console[m]!==void 0?i(console,m):console.log!==void 0?i(console,"log"):e}function c(m,I){for(var R=0;R<s.length;R++){var A=s[R];this[A]=R<m?e:this.methodFactory(A,m,I)}this.log=this.debug}function u(m,I,R){return function(){typeof console!==n&&(c.call(this,I,R),this[m].apply(this,arguments))}}function l(m,I,R){return a(m)||u.apply(this,arguments)}function w(m,I,R){var A=this,le;I=I??"WARN";var q="loglevel";typeof m=="string"?q+=":"+m:typeof m=="symbol"&&(q=void 0);function Ce(k){var we=(s[k]||"silent").toUpperCase();if(!(typeof window===n||!q)){try{window.localStorage[q]=we;return}catch{}try{window.document.cookie=encodeURIComponent(q)+"="+we+";"}catch{}}}function be(){var k;if(!(typeof window===n||!q)){try{k=window.localStorage[q]}catch{}if(typeof k===n)try{var we=window.document.cookie,rt=we.indexOf(encodeURIComponent(q)+"=");rt!==-1&&(k=/^([^;]+)/.exec(we.slice(rt))[1])}catch{}return A.levels[k]===void 0&&(k=void 0),k}}function Ji(){if(!(typeof window===n||!q)){try{window.localStorage.removeItem(q);return}catch{}try{window.document.cookie=encodeURIComponent(q)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}A.name=m,A.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},A.methodFactory=R||l,A.getLevel=function(){return le},A.setLevel=function(k,we){if(typeof k=="string"&&A.levels[k.toUpperCase()]!==void 0&&(k=A.levels[k.toUpperCase()]),typeof k=="number"&&k>=0&&k<=A.levels.SILENT){if(le=k,we!==!1&&Ce(k),c.call(A,k,m),typeof console===n&&k<A.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+k},A.setDefaultLevel=function(k){I=k,be()||A.setLevel(k,!1)},A.resetLevel=function(){A.setLevel(I,!1),Ji()},A.enableAll=function(k){A.setLevel(A.levels.TRACE,k)},A.disableAll=function(k){A.setLevel(A.levels.SILENT,k)};var qt=be();qt==null&&(qt=I),A.setLevel(qt,!1)}var y=new w,S={};y.getLogger=function(I){if(typeof I!="symbol"&&typeof I!="string"||I==="")throw new TypeError("You must supply a name when creating a logger.");var R=S[I];return R||(R=S[I]=new w(I,y.getLevel(),y.methodFactory)),R};var j=typeof window!==n?window.log:void 0;return y.noConflict=function(){return typeof window!==n&&window.log===y&&(window.log=j),y},y.getLoggers=function(){return S},y.default=y,y})})(bn);const V=bn.exports,as=t=>t.incomingMessageSubject.pipe(xe(e=>{"eventType"in e?(V.debug(`ðŸ”µðŸ’¬â¬‡ï¸ message lifecycle event
${JSON.stringify(e,null,2)}`),t.messageLifeCycleEventSubject.next(e)):(V.debug(`ðŸ”µâ¬‡ï¸ wallet response
${JSON.stringify(e,null,2)}`),t.responseSubject.next(e))})),us=t=>t.dispatchEventSubject.pipe(xe(({event:e,payload:n})=>{V.debug(`ðŸ”µâ¬†ï¸ wallet request
${JSON.stringify(n,null,2)}`),window.dispatchEvent(new CustomEvent(e,{detail:n}))})),cs=t=>{const e=new Oe;return e.add(us(t).subscribe()),e.add(os(t).subscribe()),e.add(as(t).subscribe()),e},ls=t=>{const e=r=>{const s=r.detail;t.incomingMessageSubject.next(s)};return addEventListener(mt.incomingMessage,e),{destroy:()=>{removeEventListener(mt.incomingMessage,e)}}},ds=(t=is())=>{const e=cs(t),n=ls(t);return{destroy:()=>{n.destroy(),e.unsubscribe()},subjects:t}};function yt(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(w){o(w)}}function c(l){try{u(r.throw(l))}catch(w){o(w)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function vt(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ye(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function he(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var fs={withStackTrace:!1},wn=function(t,e,n){n===void 0&&(n=fs);var r=e.isOk()?{type:"Ok",value:e.value}:{type:"Err",value:e.error},s=n.withStackTrace?new Error().stack:void 0;return{data:r,message:t,stack:s}},X=function(){function t(e){this._promise=e}return t.fromSafePromise=function(e){var n=e.then(function(r){return new pe(r)});return new t(n)},t.fromPromise=function(e,n){var r=e.then(function(s){return new pe(s)}).catch(function(s){return new me(n(s))});return new t(r)},t.combine=function(e){return ps(e)},t.combineWithAllErrors=function(e){return ms(e)},t.prototype.map=function(e){var n=this;return new t(this._promise.then(function(r){return yt(n,void 0,void 0,function(){var s;return vt(this,function(i){switch(i.label){case 0:return r.isErr()?[2,new me(r.error)]:(s=pe.bind,[4,e(r.value)]);case 1:return[2,new(s.apply(pe,[void 0,i.sent()]))]}})})}))},t.prototype.mapErr=function(e){var n=this;return new t(this._promise.then(function(r){return yt(n,void 0,void 0,function(){var s;return vt(this,function(i){switch(i.label){case 0:return r.isOk()?[2,new pe(r.value)]:(s=me.bind,[4,e(r.error)]);case 1:return[2,new(s.apply(me,[void 0,i.sent()]))]}})})}))},t.prototype.andThen=function(e){return new t(this._promise.then(function(n){if(n.isErr())return new me(n.error);var r=e(n.value);return r instanceof t?r._promise:r}))},t.prototype.orElse=function(e){var n=this;return new t(this._promise.then(function(r){return yt(n,void 0,void 0,function(){return vt(this,function(s){return r.isErr()?[2,e(r.error)]:[2,new pe(r.value)]})})}))},t.prototype.match=function(e,n){return this._promise.then(function(r){return r.match(e,n)})},t.prototype.unwrapOr=function(e){return this._promise.then(function(n){return n.unwrapOr(e)})},t.prototype.then=function(e,n){return this._promise.then(e,n)},t}(),Sn=function(t){return new X(Promise.resolve(new me(t)))};X.fromPromise,X.fromSafePromise;var hs=function(t){return function(e){return he(he([],Ye(e),!1),[t],!1)}},Tn=function(t){return t.reduce(function(e,n){return e.isOk()?n.isErr()?Y(n.error):e.map(hs(n.value)):e},G([]))},ps=function(t){return X.fromSafePromise(Promise.all(t)).andThen(Tn)},On=function(t){return t.reduce(function(e,n){return n.isErr()?e.isErr()?Y(he(he([],Ye(e.error),!1),[n.error],!1)):Y([n.error]):e.isErr()?e:G(he(he([],Ye(e.value),!1),[n.value],!1))},G([]))},ms=function(t){return X.fromSafePromise(Promise.all(t)).andThen(On)},gt;(function(t){function e(s,i){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];try{var c=s.apply(void 0,he([],Ye(o),!1));return G(c)}catch(u){return Y(i?i(u):u)}}}t.fromThrowable=e;function n(s){return Tn(s)}t.combine=n;function r(s){return On(s)}t.combineWithAllErrors=r})(gt||(gt={}));var G=function(t){return new pe(t)},Y=function(t){return new me(t)},pe=function(){function t(e){this.value=e}return t.prototype.isOk=function(){return!0},t.prototype.isErr=function(){return!this.isOk()},t.prototype.map=function(e){return G(e(this.value))},t.prototype.mapErr=function(e){return G(this.value)},t.prototype.andThen=function(e){return e(this.value)},t.prototype.orElse=function(e){return G(this.value)},t.prototype.asyncAndThen=function(e){return e(this.value)},t.prototype.asyncMap=function(e){return X.fromSafePromise(e(this.value))},t.prototype.unwrapOr=function(e){return this.value},t.prototype.match=function(e,n){return e(this.value)},t.prototype._unsafeUnwrap=function(e){return this.value},t.prototype._unsafeUnwrapErr=function(e){throw wn("Called `_unsafeUnwrapErr` on an Ok",this,e)},t}(),me=function(){function t(e){this.error=e}return t.prototype.isOk=function(){return!1},t.prototype.isErr=function(){return!this.isOk()},t.prototype.map=function(e){return Y(this.error)},t.prototype.mapErr=function(e){return Y(e(this.error))},t.prototype.andThen=function(e){return Y(this.error)},t.prototype.orElse=function(e){return e(this.error)},t.prototype.asyncAndThen=function(e){return Sn(this.error)},t.prototype.asyncMap=function(e){return Sn(this.error)},t.prototype.unwrapOr=function(e){return e},t.prototype.match=function(e,n){return n(this.error)},t.prototype._unsafeUnwrap=function(e){throw wn("Called `_unsafeUnwrap` on an Err",this,e)},t.prototype._unsafeUnwrapErr=function(e){return this.error},t}();gt.fromThrowable;const K={extensionDetectionTime:100,defaultNumberOfAccountsQuantity:1,defaultNumberOfAccountsQuantifier:"atLeast",logLevel:"info"},An=t=>t,oe={rejectedByUser:"rejectedByUser",missingExtension:"missingExtension",canceledByUser:"canceledByUser",walletRequestValidation:"walletRequestValidation",walletResponseValidation:"walletResponseValidation",wrongNetwork:"wrongNetwork",failedToPrepareTransaction:"failedToPrepareTransaction",failedToCompileTransaction:"failedToCompileTransaction",failedToSignTransaction:"failedToSignTransaction",failedToSubmitTransaction:"failedToSubmitTransaction",failedToPollSubmittedTransaction:"failedToPollSubmittedTransaction",submittedTransactionWasDuplicate:"submittedTransactionWasDuplicate",submittedTransactionHasFailedTransactionStatus:"submittedTransactionHasFailedTransactionStatus",submittedTransactionHasRejectedTransactionStatus:"submittedTransactionHasRejectedTransactionStatus",failedToFindAccountWithEnoughFundsToLockFee:"failedToFindAccountWithEnoughFundsToLockFee",wrongAccountType:"wrongAccountType",unknownWebsite:"unknownWebsite",radixJsonNotFound:"radixJsonNotFound",unknownDappDefinitionAddress:"unknownDappDefinitionAddress",invalidPersona:"invalidPersona"},ys=new Map().set(oe.missingExtension,"extension could not be found").set(oe.rejectedByUser,"user rejected request").set(oe.canceledByUser,"user has canceled the request"),De=(t,e,n)=>({error:t,interactionId:e,message:n||ys.get(t)||""}),vs=t=>X.fromPromise(Yr(t),An).andThen(e=>e),gs=(t,e)=>t.messageLifeCycleEventSubject.pipe(Le(n=>n.interactionId===e)),_s=t=>e=>n=>{const r=new re;e.requestControl&&e.requestControl({cancelRequest:()=>(V.debug(`ðŸ”µâ¬†ï¸âŒ wallet request canceled
${JSON.stringify(n,null,2)}`),r.next())});const s=r.asObservable().pipe(je(()=>Y(De(oe.canceledByUser,n.interactionId)))),i=t.responseSubject.pipe(Le(S=>S.interactionId===n.interactionId),je(S=>"items"in S?G(S):Y(S))),o=ht(i,s).pipe(gn()),a=gs(t,n.interactionId).pipe(xe(S=>{e.eventCallback&&e.eventCallback(S.eventType)}),ss(i),_n()),c=a.subscribe(),u=Xr(K.extensionDetectionTime).pipe(je(()=>Y(De(oe.missingExtension,n.interactionId)))),l=ht(u,a).pipe(gn(),Le(S=>!("eventType"in S))),w=Gr(!0).pipe(xe(()=>{t.outgoingMessageSubject.next(n)}),Le(()=>!1)),y=ht(o,l,w).pipe(xe(()=>{c.unsubscribe()}));return vs(y)};var E;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(E||(E={}));const h=E.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ye=t=>{switch(typeof t){case"undefined":return h.undefined;case"string":return h.string;case"number":return isNaN(t)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"object":return Array.isArray(t)?h.array:t===null?h.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?h.promise:typeof Map<"u"&&t instanceof Map?h.map:typeof Set<"u"&&t instanceof Set?h.set:typeof Date<"u"&&t instanceof Date?h.date:h.object;default:return h.unknown}},f=E.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]);class ae extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,E.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ae.create=t=>new ae(t);const Ke=(t,e)=>{let n;switch(t.code){case f.invalid_type:t.received===h.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case f.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,E.jsonStringifyReplacer)}`;break;case f.unrecognized_keys:n=`Unrecognized key(s) in object: ${E.joinValues(t.keys,", ")}`;break;case f.invalid_union:n="Invalid input";break;case f.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${E.joinValues(t.options)}`;break;case f.invalid_enum_value:n=`Invalid enum value. Expected ${E.joinValues(t.options)}, received '${t.received}'`;break;case f.invalid_arguments:n="Invalid function arguments";break;case f.invalid_return_type:n="Invalid function return type";break;case f.invalid_date:n="Invalid date";break;case f.invalid_string:typeof t.validation=="object"?"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:E.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case f.too_small:t.type==="array"?n=`Array must contain ${t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be greater than ${t.inclusive?"or equal to ":""}${t.minimum}`:t.type==="date"?n=`Date must be greater than ${t.inclusive?"or equal to ":""}${new Date(t.minimum)}`:n="Invalid input";break;case f.too_big:t.type==="array"?n=`Array must contain ${t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be less than ${t.inclusive?"or equal to ":""}${t.maximum}`:t.type==="date"?n=`Date must be smaller than ${t.inclusive?"or equal to ":""}${new Date(t.maximum)}`:n="Invalid input";break;case f.custom:n="Invalid input";break;case f.invalid_intersection_types:n="Intersection results could not be merged";break;case f.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;default:n=e.defaultError,E.assertNever(t)}return{message:n}};let bs=Ke;function _t(){return bs}const bt=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}};function p(t,e){const n=bt({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_t(),Ke].filter(r=>!!r)});t.common.issues.push(n)}class D{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return _;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return D.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return _;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const _=Object.freeze({status:"aborted"}),W=t=>({status:"valid",value:t}),xn=t=>t.status==="aborted",En=t=>t.status==="dirty",wt=t=>t.status==="valid",kn=t=>typeof Promise!==void 0&&t instanceof Promise;var x;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(x||(x={}));class J{constructor(e,n,r,s){this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._path.concat(this._key)}}const In=(t,e)=>{if(wt(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new ae(t.common.issues)}};function b(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class T{constructor(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ye(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new D,ctx:{common:e.parent.common,data:e.data,parsedType:ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(kn(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ye(e)},i=this._parseSync({data:e,path:s.path,parent:s});return In(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ye(e)},s=this._parse({data:e,path:[],parent:r}),i=await(kn(s)?s:Promise.resolve(s));return In(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:f.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new ce({schema:this,typeName:g.ZodEffects,effect:{type:"refinement",refinement:e}})}optional(){return ne.create(this)}nullable(){return Pe.create(this)}nullish(){return this.optional().nullable()}array(){return ee.create(this)}promise(){return Ze.create(this)}or(e){return Je.create([this,e])}and(e){return Qe.create(this,e)}transform(e){return new ce({schema:this,typeName:g.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Nn({innerType:this,defaultValue:n,typeName:g.ZodDefault})}brand(){return new As({typeName:g.ZodBranded,type:this,...b(void 0)})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ws=/^c[^\s-]{8,}$/i,Ss=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Ts=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class ve extends T{constructor(){super(...arguments),this._regex=(e,n,r)=>this.refinement(s=>e.test(s),{validation:n,code:f.invalid_string,...x.errToObj(r)}),this.nonempty=e=>this.min(1,x.errToObj(e)),this.trim=()=>new ve({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._getType(e)!==h.string){const i=this._getOrReturnCtx(e);return p(i,{code:f.invalid_type,expected:h.string,received:i.parsedType}),_}const r=new D;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),p(s,{code:f.too_small,minimum:i.value,type:"string",inclusive:!0,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),p(s,{code:f.too_big,maximum:i.value,type:"string",inclusive:!0,message:i.message}),r.dirty());else if(i.kind==="email")Ts.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"email",code:f.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Ss.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"uuid",code:f.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")ws.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"cuid",code:f.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),p(s,{validation:"url",code:f.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"regex",code:f.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),p(s,{code:f.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),p(s,{code:f.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):E.assertNever(i);return{status:r.value,value:e.data}}_addCheck(e){return new ve({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...x.errToObj(e)})}url(e){return this._addCheck({kind:"url",...x.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...x.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...x.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...x.errToObj(n)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...x.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...x.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...x.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...x.errToObj(n)})}length(e,n){return this.min(e,n).max(e,n)}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ve.create=t=>new ve({checks:[],typeName:g.ZodString,...b(t)});function Os(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Ee extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._getType(e)!==h.number){const i=this._getOrReturnCtx(e);return p(i,{code:f.invalid_type,expected:h.number,received:i.parsedType}),_}let r;const s=new D;for(const i of this._def.checks)i.kind==="int"?E.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:f.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),p(r,{code:f.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),p(r,{code:f.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?Os(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),p(r,{code:f.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):E.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,x.toString(n))}gt(e,n){return this.setLimit("min",e,!1,x.toString(n))}lte(e,n){return this.setLimit("max",e,!0,x.toString(n))}lt(e,n){return this.setLimit("max",e,!1,x.toString(n))}setLimit(e,n,r,s){return new Ee({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:x.toString(s)}]})}_addCheck(e){return new Ee({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:x.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:x.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int")}}Ee.create=t=>new Ee({checks:[],typeName:g.ZodNumber,...b(t)});class St extends T{_parse(e){if(this._getType(e)!==h.bigint){const r=this._getOrReturnCtx(e);return p(r,{code:f.invalid_type,expected:h.bigint,received:r.parsedType}),_}return W(e.data)}}St.create=t=>new St({typeName:g.ZodBigInt,...b(t)});class Tt extends T{_parse(e){if(this._getType(e)!==h.boolean){const r=this._getOrReturnCtx(e);return p(r,{code:f.invalid_type,expected:h.boolean,received:r.parsedType}),_}return W(e.data)}}Tt.create=t=>new Tt({typeName:g.ZodBoolean,...b(t)});class We extends T{_parse(e){if(this._getType(e)!==h.date){const i=this._getOrReturnCtx(e);return p(i,{code:f.invalid_type,expected:h.date,received:i.parsedType}),_}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return p(i,{code:f.invalid_date}),_}const r=new D;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),p(s,{code:f.too_small,message:i.message,inclusive:!0,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),p(s,{code:f.too_big,message:i.message,inclusive:!0,maximum:i.value,type:"date"}),r.dirty()):E.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new We({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:x.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:x.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}We.create=t=>new We({checks:[],typeName:g.ZodDate,...b(t)});class Ot extends T{_parse(e){if(this._getType(e)!==h.undefined){const r=this._getOrReturnCtx(e);return p(r,{code:f.invalid_type,expected:h.undefined,received:r.parsedType}),_}return W(e.data)}}Ot.create=t=>new Ot({typeName:g.ZodUndefined,...b(t)});class At extends T{_parse(e){if(this._getType(e)!==h.null){const r=this._getOrReturnCtx(e);return p(r,{code:f.invalid_type,expected:h.null,received:r.parsedType}),_}return W(e.data)}}At.create=t=>new At({typeName:g.ZodNull,...b(t)});class xt extends T{constructor(){super(...arguments),this._any=!0}_parse(e){return W(e.data)}}xt.create=t=>new xt({typeName:g.ZodAny,...b(t)});class ke extends T{constructor(){super(...arguments),this._unknown=!0}_parse(e){return W(e.data)}}ke.create=t=>new ke({typeName:g.ZodUnknown,...b(t)});class ue extends T{_parse(e){const n=this._getOrReturnCtx(e);return p(n,{code:f.invalid_type,expected:h.never,received:n.parsedType}),_}}ue.create=t=>new ue({typeName:g.ZodNever,...b(t)});class Et extends T{_parse(e){if(this._getType(e)!==h.undefined){const r=this._getOrReturnCtx(e);return p(r,{code:f.invalid_type,expected:h.void,received:r.parsedType}),_}return W(e.data)}}Et.create=t=>new Et({typeName:g.ZodVoid,...b(t)});class ee extends T{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==h.array)return p(n,{code:f.invalid_type,expected:h.array,received:n.parsedType}),_;if(s.minLength!==null&&n.data.length<s.minLength.value&&(p(n,{code:f.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(p(n,{code:f.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all(n.data.map((o,a)=>s.type._parseAsync(new J(n,o,n.path,a)))).then(o=>D.mergeArray(r,o));const i=n.data.map((o,a)=>s.type._parseSync(new J(n,o,n.path,a)));return D.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ee({...this._def,minLength:{value:e,message:x.toString(n)}})}max(e,n){return new ee({...this._def,maxLength:{value:e,message:x.toString(n)}})}length(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ee.create=(t,e)=>new ee({type:t,minLength:null,maxLength:null,typeName:g.ZodArray,...b(e)});var kt;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(kt||(kt={}));const Rn=t=>e=>new P({...t,shape:()=>({...t.shape(),...e})});function Ie(t){if(t instanceof P){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ne.create(Ie(r))}return new P({...t._def,shape:()=>e})}else return t instanceof ee?ee.create(Ie(t.element)):t instanceof ne?ne.create(Ie(t.unwrap())):t instanceof Pe?Pe.create(Ie(t.unwrap())):t instanceof te?te.create(t.items.map(e=>Ie(e))):t}class P extends T{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=Rn(this._def),this.extend=Rn(this._def)}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=E.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==h.object){const u=this._getOrReturnCtx(e);return p(u,{code:f.invalid_type,expected:h.object,received:u.parsedType}),_}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ue&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],w=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new J(s,w,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof ue){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(p(s,{code:f.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const w=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new J(s,w,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const w=await l.key;u.push({key:w,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>D.mergeObjectSync(r,u)):D.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return x.errToObj,new P({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=x.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new P({...this._def,unknownKeys:"strip"})}passthrough(){return new P({...this._def,unknownKeys:"passthrough"})}setKey(e,n){return this.augment({[e]:n})}merge(e){return new P({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>kt.mergeShapes(this._def.shape(),e._def.shape()),typeName:g.ZodObject})}catchall(e){return new P({...this._def,catchall:e})}pick(e){const n={};return E.objectKeys(e).map(r=>{this.shape[r]&&(n[r]=this.shape[r])}),new P({...this._def,shape:()=>n})}omit(e){const n={};return E.objectKeys(this.shape).map(r=>{E.objectKeys(e).indexOf(r)===-1&&(n[r]=this.shape[r])}),new P({...this._def,shape:()=>n})}deepPartial(){return Ie(this)}partial(e){const n={};if(e)return E.objectKeys(this.shape).map(r=>{E.objectKeys(e).indexOf(r)===-1?n[r]=this.shape[r]:n[r]=this.shape[r].optional()}),new P({...this._def,shape:()=>n});for(const r in this.shape){const s=this.shape[r];n[r]=s.optional()}return new P({...this._def,shape:()=>n})}required(){const e={};for(const n in this.shape){let s=this.shape[n];for(;s instanceof ne;)s=s._def.innerType;e[n]=s}return new P({...this._def,shape:()=>e})}keyof(){return Pn(E.objectKeys(this.shape))}}P.create=(t,e)=>new P({shape:()=>t,unknownKeys:"strip",catchall:ue.create(),typeName:g.ZodObject,...b(e)}),P.strictCreate=(t,e)=>new P({shape:()=>t,unknownKeys:"strict",catchall:ue.create(),typeName:g.ZodObject,...b(e)}),P.lazycreate=(t,e)=>new P({shape:t,unknownKeys:"strip",catchall:ue.create(),typeName:g.ZodObject,...b(e)});class Je extends T{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ae(a.ctx.common.issues));return p(n,{code:f.invalid_union,unionErrors:o}),_}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},l=c._parseSync({data:n.data,path:n.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ae(c));return p(n,{code:f.invalid_union,unionErrors:a}),_}}get options(){return this._def.options}}Je.create=(t,e)=>new Je({options:t,typeName:g.ZodUnion,...b(e)});class It extends T{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==h.object)return p(n,{code:f.invalid_type,expected:h.object,received:n.parsedType}),_;const r=this.discriminator,s=n.data[r],i=this.options.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(p(n,{code:f.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[r]}),_)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(e,n,r){const s=new Map;try{n.forEach(i=>{const o=i.shape[e].value;s.set(o,i)})}catch{throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(s.size!==n.length)throw new Error("Some of the discriminator values are not unique");return new It({typeName:g.ZodDiscriminatedUnion,discriminator:e,options:s,...b(r)})}}function Rt(t,e){const n=ye(t),r=ye(e);if(t===e)return{valid:!0,data:t};if(n===h.object&&r===h.object){const s=E.objectKeys(e),i=E.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Rt(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===h.array&&r===h.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Rt(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===h.date&&r===h.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Qe extends T{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(xn(i)||xn(o))return _;const a=Rt(i.value,o.value);return a.valid?((En(i)||En(o))&&n.dirty(),{status:n.value,value:a.data}):(p(r,{code:f.invalid_intersection_types}),_)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Qe.create=(t,e,n)=>new Qe({left:t,right:e,typeName:g.ZodIntersection,...b(n)});class te extends T{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.array)return p(r,{code:f.invalid_type,expected:h.array,received:r.parsedType}),_;if(r.data.length<this._def.items.length)return p(r,{code:f.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),_;!this._def.rest&&r.data.length>this._def.items.length&&(p(r,{code:f.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),n.dirty());const i=r.data.map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new J(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>D.mergeArray(n,o)):D.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new te({...this._def,rest:e})}}te.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new te({items:t,typeName:g.ZodTuple,rest:null,...b(e)})};class Xe extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.object)return p(r,{code:f.invalid_type,expected:h.object,received:r.parsedType}),_;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new J(r,a,r.path,a)),value:o._parse(new J(r,r.data[a],r.path,a))});return r.common.async?D.mergeObjectAsync(n,s):D.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof T?new Xe({keyType:e,valueType:n,typeName:g.ZodRecord,...b(r)}):new Xe({keyType:ve.create(),valueType:e,typeName:g.ZodRecord,...b(n)})}}class Pt extends T{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.map)return p(r,{code:f.invalid_type,expected:h.map,received:r.parsedType}),_;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new J(r,a,r.path,[u,"key"])),value:i._parse(new J(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return _;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return _;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}}}}Pt.create=(t,e,n)=>new Pt({valueType:e,keyType:t,typeName:g.ZodMap,...b(n)});class Re extends T{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==h.set)return p(r,{code:f.invalid_type,expected:h.set,received:r.parsedType}),_;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(p(r,{code:f.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(p(r,{code:f.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return _;l.status==="dirty"&&n.dirty(),u.add(l.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new J(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Re({...this._def,minSize:{value:e,message:x.toString(n)}})}max(e,n){return new Re({...this._def,maxSize:{value:e,message:x.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Re.create=(t,e)=>new Re({valueType:t,minSize:null,maxSize:null,typeName:g.ZodSet,...b(e)});class Ue extends T{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==h.function)return p(n,{code:f.invalid_type,expected:h.function,received:n.parsedType}),_;function r(a,c){return bt({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_t(),Ke].filter(u=>!!u),issueData:{code:f.invalid_arguments,argumentsError:c}})}function s(a,c){return bt({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_t(),Ke].filter(u=>!!u),issueData:{code:f.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof Ze?W(async(...a)=>{const c=new ae([]),u=await this._def.args.parseAsync(a,i).catch(y=>{throw c.addIssue(r(a,y)),c}),l=await o(...u);return await this._def.returns._def.type.parseAsync(l,i).catch(y=>{throw c.addIssue(s(l,y)),c})}):W((...a)=>{const c=this._def.args.safeParse(a,i);if(!c.success)throw new ae([r(a,c.error)]);const u=o(...c.data),l=this._def.returns.safeParse(u,i);if(!l.success)throw new ae([s(u,l.error)]);return l.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ue({...this._def,args:te.create(e).rest(ke.create())})}returns(e){return new Ue({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Ue({args:e||te.create([]).rest(ke.create()),returns:n||ke.create(),typeName:g.ZodFunction,...b(r)})}}class Nt extends T{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Nt.create=(t,e)=>new Nt({getter:t,typeName:g.ZodLazy,...b(e)});class Ct extends T{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return p(n,{code:f.invalid_literal,expected:this._def.value}),_}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ct.create=(t,e)=>new Ct({value:t,typeName:g.ZodLiteral,...b(e)});function Pn(t,e){return new $t({values:t,typeName:g.ZodEnum,...b(e)})}class $t extends T{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return p(n,{expected:E.joinValues(r),received:n.parsedType,code:f.invalid_type}),_}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return p(n,{received:n.data,code:f.invalid_enum_value,options:r}),_}return W(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}}$t.create=Pn;class jt extends T{_parse(e){const n=E.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==h.string&&r.parsedType!==h.number){const s=E.objectValues(n);return p(r,{expected:E.joinValues(s),received:r.parsedType,code:f.invalid_type}),_}if(n.indexOf(e.data)===-1){const s=E.objectValues(n);return p(r,{received:r.data,code:f.invalid_enum_value,options:s}),_}return W(e.data)}get enum(){return this._def.values}}jt.create=(t,e)=>new jt({values:t,typeName:g.ZodNativeEnum,...b(e)});class Ze extends T{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==h.promise&&n.common.async===!1)return p(n,{code:f.invalid_type,expected:h.promise,received:n.parsedType}),_;const r=n.parsedType===h.promise?n.data:Promise.resolve(n.data);return W(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ze.create=(t,e)=>new Ze({type:t,typeName:g.ZodPromise,...b(e)});class ce extends T{innerType(){return this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){const o=s.transform(r.data);return r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}const i={addIssue:o=>{p(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?_:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?_:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!wt(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>wt(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);E.assertNever(s)}}ce.create=(t,e,n)=>new ce({schema:t,typeName:g.ZodEffects,effect:e,...b(n)}),ce.createWithPreprocess=(t,e,n)=>new ce({schema:e,effect:{type:"preprocess",transform:t},typeName:g.ZodEffects,...b(n)});class ne extends T{_parse(e){return this._getType(e)===h.undefined?W(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ne.create=(t,e)=>new ne({innerType:t,typeName:g.ZodOptional,...b(e)});class Pe extends T{_parse(e){return this._getType(e)===h.null?W(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pe.create=(t,e)=>new Pe({innerType:t,typeName:g.ZodNullable,...b(e)});class Nn extends T{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===h.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Nn.create=(t,e)=>new ne({innerType:t,typeName:g.ZodOptional,...b(e)});class Lt extends T{_parse(e){if(this._getType(e)!==h.nan){const r=this._getOrReturnCtx(e);return p(r,{code:f.invalid_type,expected:h.nan,received:r.parsedType}),_}return{status:"valid",value:e.data}}}Lt.create=t=>new Lt({typeName:g.ZodNaN,...b(t)});class As extends T{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}P.lazycreate;var g;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded"})(g||(g={}));const C=ve.create,et=Ee.create;Lt.create,St.create;const tt=Tt.create;We.create,Ot.create,At.create,xt.create,ke.create,ue.create,Et.create,ee.create;const O=P.create;P.strictCreate;const U=Je.create;It.create,Qe.create,te.create,Xe.create,Pt.create,Re.create,Ue.create,Nt.create;const v=Ct.create;$t.create,jt.create,Ze.create,ce.create,ne.create,Pe.create,ce.createWithPreprocess;const ge={oneTimeAccounts:v("oneTimeAccounts"),ongoingAccounts:v("ongoingAccounts"),oneTimePersonaData:v("oneTimePersonaData"),ongoingPersonaData:v("ongoingPersonaData"),auth:v("auth"),send:v("send")},Cn=U([v("rejectedByUser"),v("wrongNetwork"),v("failedToPrepareTransaction"),v("failedToCompileTransaction"),v("failedToSignTransaction"),v("failedToSubmitTransaction"),v("failedToPollSubmittedTransaction"),v("failedToFindAccountWithEnoughFundsToLockFee"),v("submittedTransactionWasDuplicate"),v("submittedTransactionHasFailedTransactionStatus"),v("submittedTransactionHasRejectedTransactionStatus"),v("wrongAccountType"),v("unknownWebsite"),v("radixJsonNotFound"),v("unknownDappDefinitionAddress"),v("invalidPersona")]),qe={givenName:"givenName",familyName:"familyName",emailAddress:"emailAddress",phoneNumber:"phoneNumber"},Mt=U([v(qe.emailAddress),v(qe.familyName),v(qe.givenName),v(qe.phoneNumber)]),Dt=O({address:C(),label:C(),appearanceId:et()}),$n=O({account:Dt,challenge:C(),signature:C()}),Wt=O({identityAddress:C(),label:C()}),jn=O({field:Mt,value:C()});U([v("exactly"),v("atLeast")]);const Ln=O({quantifier:U([v("exactly"),v("atLeast")]),quantity:et()}),xs=O({networkId:et(),dAppDefinitionAddress:C()}),Mn=O({requiresProofOfOwnership:tt(),numberOfAccounts:Ln}),Es=O({accounts:$n.array()}),ks=O({accounts:Dt.array()}),Ut=U([Es,ks]),Is=O({requiresProofOfOwnership:tt(),numberOfAccounts:Ln}),Rs=O({accounts:$n.array()}),Ps=O({accounts:Dt.array()}),Ns=U([Rs,Ps]),Dn=O({fields:C().array()}),Wn=O({fields:jn.array()}),Cs=O({fields:Mt.array()}),$s=O({fields:jn.array()}),js=O({discriminator:v("usePersona"),identityAddress:C()}),Ls=O({discriminator:v("usePersona"),persona:Wt}),Ms=O({discriminator:v("login"),challenge:C().optional()}),Ds=O({discriminator:v("loginWithoutChallenge"),persona:Wt}),Ws=O({discriminator:v("loginWithChallenge"),persona:Wt,challenge:C(),publicKey:C(),signature:C()}),Un=U([Ds,Ws]),Zn=U([js,Ms]),Us=U([Ls,Un]),Zs=O({accounts:tt(),personaData:tt()}),qs=O({transactionManifest:C(),version:et(),blobs:C().array().optional(),message:C().optional()}),Fs=O({transactionIntentHash:C()}),Bs=O({discriminator:v("unauthorizedRequest"),oneTimeAccounts:Mn.optional(),oneTimePersonaData:Dn.optional()}),Vs=O({discriminator:v("authorizedRequest"),auth:Zn,oneTimeAccounts:Mn.optional(),ongoingAccounts:Is.optional(),oneTimePersonaData:Dn.optional(),ongoingPersonaData:Cs.optional(),reset:Zs.optional()}),qn=U([Bs,Vs]),zs=O({discriminator:v("transaction"),send:qs}),Hs=U([qn,zs]),Fn=O({interactionId:C(),items:Hs,metadata:xs}),Bn=O({discriminator:v("unauthorizedRequest"),oneTimeAccounts:Ut.optional(),oneTimePersonaData:Wn.optional()}),Vn=O({discriminator:v("authorizedRequest"),auth:Us,oneTimeAccounts:Ut.optional(),ongoingAccounts:Ns.optional(),oneTimePersonaData:Wn.optional(),ongoingPersonaData:$s.optional()}),zn=U([Bn,Vn]),Hn=O({discriminator:v("transaction"),send:Fs}),Gn=U([zn,Hn]),Yn=O({discriminator:v("success"),interactionId:C(),items:Gn}),Kn=O({discriminator:v("failure"),interactionId:C(),error:Cn,message:C().optional()}),Jn=U([Yn,Kn]),Qn=t=>X.fromPromise(Fn.parseAsync(t),e=>e.issues).map(()=>t).mapErr(e=>(V.error("ðŸ”µðŸ’¥ invalid wallet request"),V.debug(JSON.stringify(t,null,2)),V.debug(JSON.stringify(e,null,2)),De(oe.walletRequestValidation,t.interactionId))),Xn=t=>X.fromPromise(Jn.parseAsync(t),e=>e.issues).map(()=>t).mapErr(()=>(V.error("ðŸ”µðŸ’¥ invalid wallet response"),De(oe.walletRequestValidation,t.interactionId))),er=t=>{const{discriminator:e,...n}=t;return Object.entries(n).reduce((r,[s,i])=>{switch(s){case ge.auth.value:{const{discriminator:o,...a}=i;if(o==="usePersona")return{...r,persona:a.persona};if(o==="loginWithChallenge"){const{persona:c,...u}=a;return{...r,persona:c,signedChallenge:u}}else return{...r,persona:a.persona}}case ge.oneTimeAccounts.value:return{...r,oneTimeAccounts:i.accounts};case ge.ongoingAccounts.value:return{...r,ongoingAccounts:i.accounts};case ge.oneTimePersonaData.value:return{...r,oneTimePersonaData:i.fields};case ge.ongoingPersonaData.value:return{...r,ongoingPersonaData:i.fields};case ge.send.value:return{...r,transactionIntentHash:i.transactionIntentHash};default:return r}},{})},z={oneTimeAccountsWithoutProofOfOwnership:"oneTimeAccountsWithoutProofOfOwnership",oneTimeAccountsWithProofOfOwnership:"oneTimeAccountsWithProofOfOwnership",ongoingAccountsWithoutProofOfOwnership:"ongoingAccountsWithoutProofOfOwnership",ongoingAccountsWithProofOfOwnership:"ongoingAccountsWithProofOfOwnership",usePersona:"usePersona",loginWithoutChallenge:"loginWithoutChallenge",loginWithChallenge:"loginWithChallenge",oneTimePersonaData:"oneTimePersonaData",ongoingPersonaData:"ongoingPersonaData",reset:"reset"},nt=t=>({quantity:(t==null?void 0:t.quantity)||1,quantifier:(t==null?void 0:t.quantifier)||"atLeast"}),Gs=t=>{if(t.discriminator==="transaction"||t.discriminator==="authorizedRequest")return t;const{reset:e,...n}=t;return n},tr=t=>G(Object.entries(t).reduce((e,[n,r])=>{switch(n){case z.oneTimeAccountsWithoutProofOfOwnership:return{...e,oneTimeAccounts:{requiresProofOfOwnership:!1,numberOfAccounts:nt(r)}};case z.oneTimeAccountsWithProofOfOwnership:return{...e,oneTimeAccounts:{requiresProofOfOwnership:!0,numberOfAccounts:nt(r)}};case z.ongoingAccountsWithProofOfOwnership:return{...e,ongoingAccounts:{requiresProofOfOwnership:!0,numberOfAccounts:nt(r)}};case z.ongoingAccountsWithoutProofOfOwnership:return{...e,ongoingAccounts:{requiresProofOfOwnership:!1,numberOfAccounts:nt(r)}};case z.oneTimePersonaData:return{...e,oneTimePersonaData:{fields:r.fields}};case z.ongoingPersonaData:return{...e,ongoingPersonaData:{fields:r.fields}};case z.loginWithoutChallenge:return{...e,auth:{...r,discriminator:"login"},discriminator:"authorizedRequest"};case z.usePersona:return{...e,auth:{...r,discriminator:"usePersona"},discriminator:"authorizedRequest"};case z.loginWithChallenge:return{...e,auth:r,discriminator:"authorizedRequest"};case z.reset:{const{accounts:s=!1,personaData:i=!1}=r;return!s&&!i?e:{...e,reset:{accounts:s,personaData:i}}}case"send":return{discriminator:"transaction",send:r};default:return{...e,[n]:r}}},{discriminator:"unauthorizedRequest"})).map(Gs),nr=t=>(e,n=crypto.randomUUID())=>G({items:e,interactionId:n,metadata:t}),Ys={...z,...{send:"send"}},Ks=(t,e)=>({request:(s,i={})=>tr(s).andThen(nr(t)).asyncAndThen(Qn).andThen(e(i)).andThen(Xn).map(o=>o.items).map(er),sendTransaction:(s,i={})=>tr({[Ys.send]:s}).andThen(nr(t)).asyncAndThen(Qn).andThen(e(i)).andThen(Xn).map(o=>o.items).map(er)});var rr=(t=>(t.Bool="Bool",t.I8="i8",t.I16="i16",t.I32="i32",t.I64="i64",t.I128="i128",t.U8="u8",t.U16="u16",t.U32="u32",t.U64="u64",t.U128="u128",t.Unit="Unit",t.String="String",t.Enum="Enum",t.Array="Array",t.Tuple="Tuple",t.Map="Map",t.Address="Address",t.Bucket="Bucket",t.Proof="Proof",t.Expression="Expression",t.Blob="Blob",t.Decimal="Decimal",t.PreciseDecimal="PreciseDecimal",t.NonFungibleLocalId="NonFungibleLocalId",t.NonFungibleGlobalId="NonFungibleGlobalId",t.Bytes="Bytes",t))(rr||{});class Z extends Error{constructor(e){super(e)}}const Js=()=>"()",Qs=t=>`${t}`,Xs=t=>{if(t<-128||t>127)throw new Z("Number range exceeded i8");return`${t}i8`},ei=t=>{if(t<-32768||t>32767)throw new Z("Number range exceeded i16");return`${t}i16`},ti=t=>{if(t<-2147483648||t>2147483647)throw new Z("Number range exceeded i32");return`${t}i32`},ni=t=>{const e=BigInt(t);if(e<BigInt("-9223372036854775808")||e>BigInt("9223372036854775807"))throw new Z("Number range exceeded i64");return`${t}i64`},ri=t=>{const e=BigInt(t);if(e<BigInt("-170141183460469231731687303715884105728")||e>BigInt("170141183460469231731687303715884105727"))throw new Z("Number range exceeded i128");return`${t}i128`},si=t=>{if(t<0||t>255)throw new Z("Number range exceeded u8");return`${t}u8`},ii=t=>{if(t<0||t>65535)throw new Z("Number range exceeded u16");return`${t}u16`},oi=t=>{if(t<0||t>4294967295)throw new Z("Number range exceeded u32");return`${t}u32`},ai=t=>{const e=BigInt(t);if(e<0||e>BigInt("18446744073709551615"))throw new Z("Number range exceeded u64");return`${t}u64`},ui=t=>{const e=BigInt(t);if(e<0||e>BigInt("340282366920938463463374607431768211455"))throw new Z("Number range exceeded u128");return`${t}u128`},ci=t=>`"${t}"`,li=(t,...e)=>typeof t=="number"?e.length>0?`Enum(${t}u8, ${e.join(", ")})`:`Enum(${t}u8)`:e.length>0?`Enum("${t}", ${e.join(", ")})`:`Enum("${t}")`,di=(...t)=>`Tuple(${t.join(",")})`,fi=(t,...e)=>(bi(t,e),`Array<${t}>(${e.join(",")})`),hi=(t,e,...n)=>`Map<${t},${e}>(${n.join(",")})`,N=t=>`Address("${t}")`,Ne=t=>typeof t=="string"?`Bucket("${t}")`:`Bucket(${t}u32)`,Q=t=>typeof t=="string"?`Proof("${t}")`:`Proof(${t}u32)`,pi=t=>`Expression("${t}")`,mi=t=>`Blob("${t}")`,_e=t=>`Decimal("${t}")`,yi=t=>`PreciseDecimal("${t}")`,vi={String:t=>`NonFungibleLocalId("<${t}>")`,Integer:t=>`NonFungibleLocalId("#${t}#")`,Byte:t=>`NonFungibleLocalId("[${t}]")`,Uuid:t=>`NonFungibleLocalId("{${t}}")`},gi=t=>`NonFungibleGlobalId("${t}")`,_i=t=>`Bytes("${t}")`,bi=(t,e)=>{if(t==="String"){if(e.some(n=>!n.startsWith('"')&&!n.endsWith('"')))throw new Z(`Array<${t}> expects the same type`)}else if(t==="Unit"){if(e.some(n=>n!=="()"))throw new Z(`Array<${t}> expects the same type`)}else if(e.some(n=>!n.includes(t)))throw new Z(`Array<${t}> expects the same type`)};class wi{constructor(e){$e(this,"instructions");this.instructions=e}toString(){return this.instructions.join(`
`)}}class Si{constructor(){$e(this,"instructions");$e(this,"buckets");$e(this,"proofs");$e(this,"id_allocator");this.instructions=[],this.buckets=new Map,this.proofs=new Map,this.id_allocator=512}takeFromWorktop(e,n){return this.instructions.push(`TAKE_FROM_WORKTOP ${N(e)} ${Ne(n)};`),this.buckets.set(n,this.id_allocator++),this}takeFromWorktopByAmount(e,n,r){return this.instructions.push(`TAKE_FROM_WORKTOP_BY_AMOUNT ${_e(e)} ${N(n)} ${Ne(r)};`),this.buckets.set(r,this.id_allocator++),this}takeFromWorktopByIds(e,n,r){let s=e.map(function(i){return'NonFungibleLocalId("'+i+'")'}).join(", ");return this.instructions.push(`TAKE_FROM_WORKTOP_BY_IDS Array<NonFungibleLocalId>(${s}) ${N(n)} ${Ne(r)};`),this.buckets.set(r,this.id_allocator++),this}returnToWorktop(e){return this.instructions.push(`RETURN_TO_WORKTOP ${Ne(e)};`),this}assertWorktopContains(e){return this.instructions.push(`ASSERT_WORKTOP_CONTAINS ${N(e)};`),this}assertWorktopContainsByAmount(e,n){return this.instructions.push(`ASSERT_WORKTOP_CONTAINS_BY_AMOUNT ${_e(e)} ${N(n)};`),this}assertWorktopContainsByIds(e,n){let r=e.map(function(s){return'NonFungibleLocalId("'+s+'")'}).join(", ");return this.instructions.push(`ASSERT_WORKTOP_CONTAINS_BY_IDS Array<NonFungibleLocalId>(${r}) ${N(n)};`),this}popFromAuthZone(e){return this.instructions.push(`POP_FROM_AUTH_ZONE ${Q(e)};`),this.proofs.set(e,this.id_allocator++),this}pushToAuthZone(e){return this.instructions.push(`PUSH_TO_AUTH_ZONE ${Q(e)};`),this}clearAuthZone(){return this.instructions.push("CLEAR_AUTH_ZONE;"),this}createProofFromAuthZone(e,n){return this.instructions.push(`CREATE_PROOF_FROM_AUTH_ZONE ${N(e)} ${Q(n)};`),this.proofs.set(n,this.id_allocator++),this}createProofFromAuthZoneByAmount(e,n,r){return this.instructions.push(`CREATE_PROOF_FROM_AUTH_ZONE_BY_AMOUNT ${_e(e)} ${N(n)} ${Q(r)};`),this.proofs.set(r,this.id_allocator++),this}createProofFromAuthZoneByIds(e,n,r){let s=e.map(function(i){return'NonFungibleLocalId("'+i+'")'}).join(", ");return this.instructions.push(`CREATE_PROOF_FROM_AUTH_ZONE_BY_IDS Array<NonFungibleLocalId>(${s}) ${N(n)} ${Q(r)};`),this.proofs.set(r,this.id_allocator++),this}createProofFromBucket(e,n){return this.instructions.push(`CREATE_PROOF_FROM_BUCKET ${Ne(e)} ${Q(n)};`),this.proofs.set(n,this.id_allocator++),this}cloneProof(e,n){return this.instructions.push(`CLONE_PROOF ${Q(e)} ${Q(n)};`),this.proofs.set(n,this.id_allocator++),this}dropProof(e){return this.instructions.push(`DROP_PROOF ${Q(e)};`),this}callFunction(e,n,r,s){return this.instructions.push(`CALL_FUNCTION ${N(e)} "${n}" "${r}" ${s.join(" ")};`),this}callMethod(e,n,r){return this.instructions.push(`CALL_METHOD ${N(e)} "${n}" ${r.join(" ")};`),this}mintFungible(e,n){return this.instructions.push(`MINT_FUNGIBLE ${N(e)} ${_e(n)};`),this}withdrawFromAccount(e,n,r){return this.instructions.push(`CALL_METHOD ${N(e)} "withdraw" ${N(n)} ${_e(r)};`),this}withdrawNonFungiblesFromAccount(e,n,r){let s=r.map(function(i){return'NonFungibleLocalId("'+i+'")'}).join(", ");return this.instructions.push(`CALL_METHOD ${N(e)} "withdraw_non_fungibles" ${N(n)} Array<NonFungibleLocalId>(${s});`),this}createProofFromAccount(e,n){return this.instructions.push(`CALL_METHOD ${N(e)} "create_proof" ${N(n)};`),this}createProofFromAccountByAmount(e,n,r){return this.instructions.push(`CALL_METHOD ${N(e)} "create_proof_by_amount" ${N(n)} ${_e(r)};`),this}createProofFromAccountByIds(e,n,r){let s=r.map(function(i){return'NonFungibleLocalId("'+i+'")'}).join(", ");return this.instructions.push(`CALL_METHOD ${N(e)} "create_proof_by_ids" ${N(n)} Array<NonFungibleLocalId>(${s});`),this}instruction(e,n){return this.instructions.push(`${e} ${n.join(" ")};`),this}build(){return new wi(this.instructions)}}var Ti="Expected a function",Oi=9007199254740991,Ai="[object Arguments]",xi="[object Function]",Ei="[object GeneratorFunction]",ki=typeof Me=="object"&&Me&&Me.Object===Object&&Me,Ii=typeof self=="object"&&self&&self.Object===Object&&self,Ri=ki||Ii||Function("return this")();function Pi(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ni(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var Zt=Object.prototype,Ci=Zt.hasOwnProperty,sr=Zt.toString,ir=Ri.Symbol,$i=Zt.propertyIsEnumerable,or=ir?ir.isConcatSpreadable:void 0,ar=Math.max;function ur(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=Mi),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?ur(a,e-1,n,r,s):Ni(s,a):r||(s[s.length]=a)}return s}function ji(t,e){return e=ar(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=ar(n.length-e,0),i=Array(s);++r<s;)i[r]=n[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=n[r];return o[e]=i,Pi(t,this,o)}}function Li(t){return ji(function(e){e=ur(e,1);var n=e.length,r=n;for(t&&e.reverse();r--;)if(typeof e[r]!="function")throw new TypeError(Ti);return function(){for(var s=0,i=n?e[s].apply(this,arguments):arguments[0];++s<n;)i=e[s].call(this,i);return i}})}function Mi(t){return Wi(t)||Di(t)||!!(or&&t&&t[or])}function Di(t){return Zi(t)&&Ci.call(t,"callee")&&(!$i.call(t,"callee")||sr.call(t)==Ai)}var Wi=Array.isArray;function Ui(t){return t!=null&&Fi(t.length)&&!qi(t)}function Zi(t){return Vi(t)&&Ui(t)}function qi(t){var e=Bi(t)?sr.call(t):"";return e==xi||e==Ei}function Fi(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Oi}function Bi(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Vi(t){return!!t&&typeof t=="object"}var zi=Li(),Hi=zi;function Gi(...t){return Hi(t)({})}const cr={withoutChallenge:()=>t=>({...t,loginWithoutChallenge:{discriminator:"login"}}),withChallenge:t=>e=>({...e,loginWithChallenge:{discriminator:"login",challenge:t}})},lr={withoutProofOfOwnership:(t=K.defaultNumberOfAccountsQuantity,e=K.defaultNumberOfAccountsQuantifier)=>n=>({...n,oneTimeAccountsWithoutProofOfOwnership:{quantity:t,quantifier:e}}),withProofOfOwnership:(t=K.defaultNumberOfAccountsQuantity,e=K.defaultNumberOfAccountsQuantifier)=>n=>({...n,oneTimeAccountsWithProofOfOwnership:{quantity:t,quantifier:e}})},dr=(...t)=>e=>({...e,oneTimePersonaData:{fields:t}}),fr={withoutProofOfOwnership:(t=K.defaultNumberOfAccountsQuantity,e=K.defaultNumberOfAccountsQuantifier)=>n=>({...n,ongoingAccountsWithoutProofOfOwnership:{quantity:t,quantifier:e}}),withProofOfOwnership:(t=K.defaultNumberOfAccountsQuantity,e=K.defaultNumberOfAccountsQuantifier)=>n=>({...n,ongoingAccountsWithProofOfOwnership:{quantity:t,quantifier:e}})},hr=(...t)=>e=>({...e,ongoingPersonaData:{fields:t}}),pr=t=>e=>({...e,usePersona:{discriminator:"usePersona",identityAddress:t}}),Yi={oneTimeAccounts:lr,ongoingAccounts:fr,oneTimePersonaData:dr,ongoingPersonaData:hr,login:cr,usePersona:pr,reset:({accounts:t=!1,personaData:e=!1})=>n=>({...n,reset:{accounts:t,personaData:e}})},mr={Mainnet:1,Stokenet:2,Adapanet:10,Nebunet:11,Gilganet:32,Enkinet:33,Hammunet:34},Ki=({networkId:t=mr.Mainnet,dAppDefinitionAddress:e,logLevel:n=K.logLevel})=>{V.setLevel(n),V.debug("ðŸ”µ wallet sdk instantiated");const r=ds(),s=()=>{V.debug("ðŸ”µðŸ§¹ destroying wallet sdk instance"),r.destroy()};return{...Ks({networkId:t,dAppDefinitionAddress:e},_s(r.subjects)),destroy:s,__subjects:r.subjects}};d.Address=N,d.Array=fi,d.AuthLoginRequestResponseItemSchema=Un,d.AuthRequestItemSchema=Zn,d.Blob=mi,d.Bool=Qs,d.Bucket=Ne,d.Bytes=_i,d.Decimal=_e,d.Enum=li,d.ErrorTypeSchema=Cn,d.Expression=pi,d.I128=ri,d.I16=ei,d.I32=ti,d.I64=ni,d.I8=Xs,d.ManifestBuilder=Si,d.ManifestValueError=Z,d.Map=hi,d.Network=mr,d.NonFungibleGlobalId=gi,d.NonFungibleLocalId=vi,d.OneTimeAccountsRequestResponseItemSchema=Ut,d.PersonaDataFieldSchema=Mt,d.PreciseDecimal=yi,d.Proof=Q,d.RequestTypeSchema=ge,d.String=ci,d.Tuple=di,d.TypeId=rr,d.U128=ui,d.U16=ii,d.U32=oi,d.U64=ai,d.U8=si,d.Unit=Js,d.WalletAuthorizedRequestResponseItemsSchema=Vn,d.WalletInteractionFailureResponseSchema=Kn,d.WalletInteractionResponseItemsSchema=Gn,d.WalletInteractionResponseSchema=Jn,d.WalletInteractionSchema=Fn,d.WalletInteractionSuccessResponseSchema=Yn,d.WalletRequestItemsSchema=qn,d.WalletRequestResponseItemsSchema=zn,d.WalletSdk=Ki,d.WalletTransactionResponseItemsSchema=Hn,d.WalletUnauthorizedRequestResponseItemsSchema=Bn,d.createSdkError=De,d.errorType=oe,d.login=cr,d.oneTimeAccounts=lr,d.oneTimePersonaData=dr,d.ongoingAccounts=fr,d.ongoingPersonaData=hr,d.personaDataField=qe,d.requestBuilder=Gi,d.requestItem=Yi,d.sdkError=An,d.usePersona=pr,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
